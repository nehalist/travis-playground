sudo: true
dist: trusty
language: php

php:
  - 7.1

services:
  - mysql

env:
  global:
    - MAGENTO_DIRECTORY=${HOME}/magento
    - MAGENTO_VERSION=1.9.4.0
    - n98="php ${TRAVIS_BUILD_DIR}/bin/n98-magerun.phar --no-interaction --root-dir=${MAGENTO_DIRECTORY}"

before_install:
  - mysql -e 'CREATE DATABASE magento;'
  - cp .n98-magerun.yaml ~

install:
  - $n98 install --magentoVersionByName="openmage-mirror" --dbUser=travis --dbHost=127.0.0.1 --dbName=magento --baseUrl="http://127.0.0.1" --installationFolder=${MAGENTO_DIRECTORY}

script:
  - php bin/n98-magerun.phar sys:check --root-dir=${MAGENTO_DIRECTORY}
